http://atv-bootloader.googlecode.com/svn/trunk/logos/mythbuntu.png

= Install [http://www.mythbuntu.org/ MythBuntu] 7.10 =

== Introduction ==

These instructions are for the installation of  [http://www.mythbuntu.org/ Mythbuntu] from the LiveCD using a normal PC hardware platform.

A *warning* here, if you install [http://www.mythbuntu.org/ Mythbuntu] and select mythfrontend only, it will expect an existing [http://www.mythtv.org/ MythTV] backend and request connect info, if this info is not correct, the install will barf and not complete correctly.

== Details ==
* [BootEFIExtraction Extract boot.efi]

* [PartitioningLinux Standard partition for Linux only]

* [AlternatePartitioning1 Alternate partition for AppleTV/Linux]

* Install Mythbuntu

   This assumes /dev/sda4 is "/" and /dev/sda5 is "swap". *WARNING, If you have existing attached hard drives and are installing from the LiveCD, the safest method is to physically disconnect those drives. It's very easy to overlook a setting in "Prepare Partitions" that can alter your existing grub settings.*

   Click on install "Mythbuntu"

   Prepare disk space
{{{
select "Manual"
}}}

   Prepare Partitions
{{{
select /dev/sda4 and "edit"
change "use as" to ext3
change mount point to "/" (without quotes)
check the format check box.

select /dev/sda5 and "edit"
change "use as" to swap

if you see any other marked partitions
select them and "edit"
change "use as" to dontuse

It's ok to install grub, we will need the grub structure (menu.lst) to boot.
we will replace the grub MBR with one that efi firmware likes
so that the boot to the tux/atv logo drops form 30-60 seconds to 11.
we do this later when the install is running native on the AppleTV.
}}}

    Now follow the normal mythbuntu install but do not reboot yet and remember to 
{{{
select mac mini IR driver
select nvidia-new driver
select and configure the display settings for your monitor
}}}

* Fix console framebuffer support
   Ubuntu has a strange console framebuffer setup so we need to fix it for the AppleTV.

   Unmount any USB drive partitions and then unplug/replug the USB drive to get the partitions mounted. The rest assumes the USB disk is mounted at /media/disk
{{{
sudo mount --bind /dev /media/disk/dev
sudo chroot /media/disk
df to make sure you are in the correct root filesystem
"/" should be mounted on /dev/sda4

nano /etc/modprobe.d/blacklist-framebuffer and comment out "blacklist vesafb"
	#blacklist vesafb

nano /etc/initramfs-tools/modules and add 
	fbcon
	vesafb

update-initramfs -u

exit
sudo umount /media/disk/dev
}}}

   Now you can a) reinstall the drive back into the AppleTV or b) install the drive into a 2.5 to USB drive adapter. Power on the AppleTV and you should see the tux/atv logo in 30-60 seconds. Then you will see atv-bootloader booting (tux in the upper left corner). After that you linux install should boot. If you are using a USB drive converter, you might have to use the IR remote and press "menu" and "-" buttons down during power on to force a USB recovery boot.

* Running Mythbuntu

   There are a few things to complete the install once you have Mythbuntu running. First open the Update Manager and take all the updates then reboot. If you are trying to match an existing MythTV backend, you might want to check the versions of MythTV and match them (outside the scope of this document). 

   Several additional items need to be updated/patched for supporting AppleTV hardware. The following are on separate pages as the procedures are similar for other debian based distributions.
    * [UpdateNvidiaDriver Update nvidia driver]
    * [UpdateAudioDriver Update audio driver]
    * [UpdateIRDriver Update IR driver]
    * [UpdateMBR Update the boot disk MBR with gptsync]
  
   Ok, that was not too hard, reboot to pickup the changes.
{{{
#------------------------------------------------
# pickup all the changes
sudo reboot
}}}

* Updating Mythbuntu

   A few things to watch out for. If you take an update that changes the kernel or kernel modules, then you will have to redo the nvidia binary driver install and patch/rebuild the audio driver and IR driver. Because of this, you should disable kernel updates. 